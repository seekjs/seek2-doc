define("sys.ui.pagination",function (req, exp) {
	"use strict";

exp.getTemplate = function($){var buf = [];
    var startIndex = Math.max(this.pageIndex - 5, 1);    var endIndex = Math.min(this.pageIndex + 5 + 5-(this.pageIndex-startIndex), this.pageCount);
buf.push('<ul class="ui-pagination">    ');
if(this.pageCount>1){
buf.push('        ');
if(this.pageIndex>1){
buf.push('            <li class="prev" data-event="goto:');
buf.push(this.pageIndex-1);
buf.push('">');
buf.push(this.prevTitle);
buf.push('</li>        ');
}
buf.push('        ');
if(startIndex>1){
buf.push('            <li data-event="goto:1">1</li>        ');
}
buf.push('        ');
if(startIndex>2){
buf.push('            <li class="dot">...</li>        ');
}
buf.push('        ');
for(var i=startIndex;i<=endIndex; i++){
buf.push('            ');
if(i==this.pageIndex){
buf.push('                <li class="cur">');
buf.push(i);
buf.push('</li>            ');
}else{
buf.push('                <li data-event="goto:');
buf.push(i);
buf.push('">');
buf.push(i);
buf.push('</li>            ');
}
buf.push('        ');
}
buf.push('        ');
if(endIndex+1<this.pageCount){
buf.push('            <li class="dot">...</li>        ');
}
buf.push('        ');
if(endIndex<this.pageCount){
buf.push('            <li data-event="goto:');
buf.push(this.pageCount);
buf.push('">');
buf.push(this.pageCount);
buf.push('</li>        ');
}
buf.push('        ');
if(this.pageIndex<this.pageCount){
buf.push('            <li class="next" data-event="goto:');
buf.push(this.pageIndex+1);
buf.push('">');
buf.push(this.nextTitle);
buf.push('</li>        ');
}
buf.push('        ');
if(this.hasJump){
buf.push('            <label>跳到第<input class="ui-page-box" type="number" data-bind="jumpPage" data-event="keyup>justNum"/>页</label>            <div class="ui-page-btn" data-event="jumpPag">确定</div>        ');
}
buf.push('    ');
}
buf.push('</ul>');
return buf.join("");};


    req("ui.css");

    exp.pageIndex = 0;      //当前页码
    exp.pageCount = 0;      //总页数
    exp.prevTitle = " < ";  //上一页标题
    exp.nextTitle = " > ";  //下一页标题
    exp.hasJump = true;
    exp.jumpPage = "";      //跳到第几页

    exp.onInit = function(){
        exp.pageIndex = exp.dataset.index * 1;
        exp.pageCount = exp.dataset.count * 1;

        if(exp.dataset.prev) {
            exp.prevTitle = exp.dataset.prev;
        }
        if(exp.dataset.next){
            exp.nextTitle = exp.dataset.next;
        }
    };

    exp.goto = function(pageIndex){
        exp.pageIndex = pageIndex;
        var fun = exp.parent[exp.dataset.change];
        fun && fun(pageIndex);
    };

    exp.justNum = function(){
        exp.element.value = exp.element.value.replace(/[^a-z0-9_]/g,'');
    };

    //跳转页面
    exp.jumpPag = function(){
        if(exp.jumpPage=="") {
            return exp.alert("请输入页码");
        }else if(exp.jumpPage<1||exp.jumpPage>exp.pageCount) {
            return exp.alert("超出范围,请重新输入");
        }
        exp.goto(exp.jumpPage);
        exp.jumpPage = "";
    };

});